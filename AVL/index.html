<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<title>AVL</title>
<link href="common/css/GpsStreamViewer.css" rel="stylesheet">

<!-- ANGULAR CODE MIRROR -->
<link rel="stylesheet" href="common/js/angular-code-mirror/angular-code-mirror.css"/>

<!-- ANGULAR -->
<link rel="stylesheet" href="common/malhar-dashboard/stylesheet.min.css">
<script type="text/javascript" src="common/js/angular/all-in-one.min.js"></script>
<script type="text/javascript" src="common/malhar-dashboard/ui-dashboard-module.js"></script>
<script type="text/javascript" src="common/js/angular/jquery-watcher.js"></script>

<!-- ANGULAR CODE MIRROR -->
<script src="common/js/angular-code-mirror/angular-code-mirror.min.js"></script>


<script type="text/javascript" src="common/js/OpenSensorHubClient.js"></script>

<!-- hashtable -->
<script type="text/javascript" src="common/js/jhashtable.js"></script>

<!-- hashset -->
<script type="text/javascript" src="common/js/jhashset.js"></script>

<!-- Radix Tree -->
<script type="text/javascript" src="common/js/RadixTree.js"></script>

<!-- Range Slider -->
<link rel="stylesheet" href="common/js/jQRangeSlider/css/classic-min.css" type="text/css" />
<script src="common/js/jQRangeSlider/jQAllRangeSliders-withRuler-min.js"></script>

<style>

.ui-rangeSlider .ui-rangeSlider-innerBar {
    height: 20px !important;
    background: #DDD !important;
    margin: 0px 6px 3px 6px !important;
}

.sliderCustomLabel {
  border-left:1px solid #f8f8f8;
  height:20px;
}

.ui-ruler-tick-label {
  margin: 0 0 0 -2px;
  background-color: #DDD;
}
</style>

</head>

<body ng-app="app">
    <nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-side">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.opensensorhub.org/">
          	<img src="https://github.com/sensiasoft/sensorhub/wiki/images/sensorhub_logo_128.png" style="-webkit-animation-play-state: paused; -webkit-transition: none; transition: none; width:50px;height:50px;">
          OpenSensorHub</a>
        </div>
      </div>
    </nav>
    <div class="sidebar collapse mobile-menu" id="bs-side" >
        <ul class="nav navbar-nav navbar-right">
          <li><label>Fire department<input type="checkbox" id="fireDepartmentId-1"/></label></li>
          <li class="divider"></li>
       </ul>
    </div>
          
    <nav class="navbar navbar-default sidebar collapse navbar-collapse" role="navigation">
      <div class="container-fluid">
      <div class=" sidebar collapse navbar-collapse" id="bs-sidebar-navbar-collapse-1">
        <ul class="nav navbar-nav" style="padding:3 0 0 0" >
          <li class="dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown">Layers <span class="caret"></span><span style="font-size:16px;padding: 3 0 0 6;" class="pull-right hidden-xs showopacity glyphicon glyphicon-th"></span></a>
            <ul class="dropdown-menu forAnimate" role="menu">
              <li><label>Fire department<input type="checkbox" id="fireDepartmentId"/></label></li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav">
           <li class="dropdown">
             <a href="" class="dropdown-toggle" data-toggle="dropdown">Filter <span class="caret"></span>   <input type="text" size="10" name="filter" id="filter" ><span style="font-size:16px;padding: 6 0 0 6;" class="pull-right hidden-xs showopacity glyphicon glyphicon-search"></span></a>
             <ul class="dropdown-menu forAnimate" role="menu">
                <li><label>Veh-id<input type="checkbox" id="filter-veh-id"/></label></li>
                <li class="divider"></li>
                <li><label>Status<input type="checkbox" id="filter-status"/></label></li>
             </ul>
           </li>  
        </ul>
      </div>
    </div>
    <div id="slider" style="width:400px;float:right;margin-top:-30px;"></div>
  </nav>
	<div ng-view=""></div>
</body>
<script>
var properties = [
	{
		name : "LeafLet",
		url  : "viewers/Leaflet/leaflet.html",
		renderDivId :  "leafletViewerId",
		defaultWidget : true,
    style : {
      desktop : {
        width : "100%",
        height : "85%"
      },
      mobile : {
        width : "100%",
        height : "95%"
      }
    }
	}
];

addWidgets(properties);	
//2014-03-30T02:34:19Z/2014-03-30T05:05:03
function TwoDigits(val){
    if (val < 10){
         return "0" + val;
    }
    
    return val;
}

$("#slider").dateRangeSlider({
    bounds: {min: new Date("2014-03-29T05:00:00Z"), max: new Date("2014-03-30T05:05:03Z")},
    defaultValues: {min: new Date("2014-03-29T21:00:00Z"), max: new Date("2014-03-30T05:05:03Z")},
    formatter: function(value){
        var hours = value.getHours(),
            minutes = value.getMinutes();
        return TwoDigits(hours) + ":" + TwoDigits(minutes);
    },
    
    scales: [{
        first: function (value) {
            return value;
        },
        end: function (value) {
            return value;
        },
        next: function (value) {
            var next = new Date(value);
            return new Date(next.setHours(value.getHours() + 1));
        },
        label: function (value) {
            if( value.getHours() %  3 == 0){
              return (value.getHours() > 0 )?TwoDigits(value.getHours()): 0;            
            } else {
              return "";
            }
        },
        format: function(tickContainer, tickStart, tickEnd){ 
          tickContainer.addClass("sliderCustomLabel");
        }
    }]
});
          
$('ul.dropdown-menu').click(function(e){
    e.stopPropagation();
});

</script>
</html>
